{"componentChunkName":"component---src-templates-documentation-page-js","path":"/dev/quickstart/","result":{"data":{"markdownRemark":{"html":"<p>This quickstart describes the initial setup required to run an instance of Crossfeed on your local computer.</p>\n<h3 id=\"initial-setup\" style=\"position:relative;\"><a href=\"#initial-setup\" aria-label=\"initial setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initial Setup</h3>\n<ol>\n<li>\n<p>Mac Users - before starting the initial setup, ensure you have already completed the following: <a href=\"https://github.com/cisagov/development-guide/blob/develop/dev_envs/mac-env-setup.md\">development environment for mac-based computers</a>.</p>\n</li>\n<li>\n<p>Install <a href=\"https://nodejs.org/en/download/\">Node.js</a> 18 and <a href=\"https://docs.docker.com/compose/install/\">Docker Compose</a>.</p>\n</li>\n<li>\n<p>Copy root <code class=\"language-text\">dev.env.example</code> file to a <code class=\"language-text\">.env</code> file.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> dev.env.example .env</code></pre></div>\n</li>\n<li>\n<p>Build the crossfeed-worker Docker image:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> backend <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">npm</span> run build-worker</code></pre></div>\n</li>\n<li>\n<p>Start the entire environment from the root directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> start</code></pre></div>\n</li>\n<li>\n<p>Generate the initial DB schema and populate it with sample data:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> backend\n<span class=\"token comment\"># Generate schema</span>\n<span class=\"token function\">npm</span> run syncdb\n<span class=\"token comment\"># Populate sample data</span>\n<span class=\"token function\">npm</span> run syncdb -- <span class=\"token parameter variable\">-d</span> populate</code></pre></div>\n<p>If you ever need to drop and recreate the database, you can run <code class=\"language-text\">npm run syncdb -- -d dangerouslyforce</code>.</p>\n</li>\n<li>\n<p>Navigate to <a href=\"http://localhost\">http://localhost</a> in a browser. The first time please navigate to <a href=\"http://localhost/signup\">http://localhost/signup</a> to create account. Local accounts can be set to Global Admin to aide in development.</p>\n</li>\n<li>\n<p>Hot reloading for source files is enabled, but after changes to non-source code files stopping and starting Docker Compose is required. The following are examples of changes that will require restarting the environment:</p>\n<ul>\n<li>Frontend or backend dependency changes</li>\n<li>Backend changes to <code class=\"language-text\">serverless.yml</code> or <code class=\"language-text\">env.yml</code></li>\n<li>Environment variables in root <code class=\"language-text\">.env</code></li>\n</ul>\n</li>\n<li>\n<p>Install <a href=\"https://www.robinwieruch.de/how-to-use-prettier-vscode\">Prettier</a> in your dev environment to format code on save.</p>\n</li>\n</ol>\n<h3 id=\"running-tests\" style=\"position:relative;\"><a href=\"#running-tests\" aria-label=\"running tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Running tests</h3>\n<p>To run tests, first make sure you have already started Crossfeed with <code class=\"language-text\">npm start</code> (or, at bare minimum, that the database container is running). Then run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> backend\n<span class=\"token function\">npm</span> <span class=\"token builtin class-name\">test</span></code></pre></div>\n<p>If snapshot tests fail, update snapshots by running <code class=\"language-text\">npm test -- -u</code>.</p>\n<p>To run tests for the subset of worker code that is written in Python, you need to run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-r</span> worker/requirements.txt\npytest</code></pre></div>\n<p>To view a code coverage report (a minimum code coverage threshold is checked in CI), run <code class=\"language-text\">npm test -- --collectCoverage</code>. You can then view a HTML coverage report in the <code class=\"language-text\">coverage/lcov-report</code> directory.</p>\n<h3 id=\"monitoring-docker-containers\" style=\"position:relative;\"><a href=\"#monitoring-docker-containers\" aria-label=\"monitoring docker containers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitoring Docker containers</h3>\n<p>To see which Docker containers are running, you can run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span>\nCONTAINER ID        IMAGE                                                 COMMAND                  CREATED             STATUS              PORTS                                            NAMES\n2a155c5bb9ce        crossfeed_backend                                     <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:3000-<span class=\"token operator\">></span><span class=\"token number\">3000</span>/tcp                           crossfeed_backend_1\n0177dff83a80        docker.elastic.co/elasticsearch/elasticsearch:7.9.0   <span class=\"token string\">\"/tini -- /usr/local…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:9200-<span class=\"token operator\">></span><span class=\"token number\">9200</span>/tcp, <span class=\"token number\">0.0</span>.0.0:9300-<span class=\"token operator\">></span><span class=\"token number\">9300</span>/tcp   crossfeed_es_1\nc0f3dee36d5e        crossfeed_frontend                                    <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:80-<span class=\"token operator\">></span><span class=\"token number\">3000</span>/tcp                             crossfeed_frontend_1\nf3491e1b547e        matomo:3.14.1                                         <span class=\"token string\">\"/entrypoint.sh apac…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">80</span>/tcp                                           crossfeed_matomo_1\nc3ed457a71d2        postgres:latest                                       <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:5432-<span class=\"token operator\">></span><span class=\"token number\">5432</span>/tcp                           crossfeed_db_1\n98c14a4f8886        mariadb:10.5                                          <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">3306</span>/tcp                                         crossfeed_matomodb_1\n9f70dbdbe867        crossfeed_docs                                        <span class=\"token string\">\"docker-entrypoint.s…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:4000-<span class=\"token operator\">></span><span class=\"token number\">4000</span>/tcp                           crossfeed_docs_1\n746956c514ed        bitnami/minio:2020.9.26                               <span class=\"token string\">\"/opt/bitnami/script…\"</span>   <span class=\"token number\">13</span> minutes ago      Up <span class=\"token number\">13</span> minutes       <span class=\"token number\">0.0</span>.0.0:9000-<span class=\"token operator\">></span><span class=\"token number\">9000</span>/tcp                           crossfeed_minio_1</code></pre></div>\n<p>You can then check the logs of a particular container by specifying a container's name with the <code class=\"language-text\">docker logs</code> command. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> logs crossfeed_backend_1 <span class=\"token parameter variable\">--follow</span></code></pre></div>\n<h3 id=\"further-information\" style=\"position:relative;\"><a href=\"#further-information\" aria-label=\"further information permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Further information</h3>\n<p>To see more information about the design and development of each component of Crossfeed,\nsee the following links:</p>\n<ul>\n<li><a href=\"frontend.md\">Frontend</a> for the React frontend.</li>\n<li><a href=\"rest-api.md\">REST API</a> for the REST API.</li>\n<li><a href=\"database.md\">Database</a> for the database models stored in Postgres.</li>\n<li><a href=\"worker.md\">Worker</a> for the worker system and adding new scans and data sources.</li>\n<li><a href=\"search.md\">Search</a> for the search infrastructure and setup with Elasticsearch.</li>\n<li><a href=\"analytics.md\">Analytics</a> for the analytics setup with Matomo.</li>\n</ul>\n<h3 id=\"documentation\" style=\"position:relative;\"><a href=\"#documentation\" aria-label=\"documentation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Documentation</h3>\n<p>The documentation files are stored in the <code class=\"language-text\">docs</code> directory and served from a Gatsby site. To work on this, you should run <code class=\"language-text\">npm start</code> from before. You can then open up <a href=\"http://localhost:4000\">http://localhost:4000</a> in your browser to view the docs.</p>\n<p>The docs are based on the <a href=\"https://github.com/18F/federalist-uswds-gatsby\">federalist-uswds-gatsby</a> theme. See that repository for more information on additional theme customizations that can be done.</p>\n<h3 id=\"common-issues\" style=\"position:relative;\"><a href=\"#common-issues\" aria-label=\"common issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Common Issues</h3>\n<ul>\n<li>Node Error issue occurs due to \"npm install\"</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> code EBADENGINE\n\t<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> engine Unsupported engine\n\t<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> engine Not compatible with your version of node/npm: crossfeed-backend@1.0.0\n\t<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> notsup Not compatible with your version of node/npm: crossfeed-backend@1.0.0\n\t<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> notsup Required: <span class=\"token punctuation\">{</span><span class=\"token string\">\"node\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\">=16.0.0 &lt;17.0.0\"</span><span class=\"token punctuation\">}</span>\n\t<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> notsup Actual:   <span class=\"token punctuation\">{</span><span class=\"token string\">\"npm\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"9.5.0\"</span>,<span class=\"token string\">\"node\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"v18.14.2\"</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> A complete log of this run can be found in:\n    <span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>     /Users/combsc/.npm/_logs/2023-03-10T20_01_15_851Z-debug-0.log</code></pre></div>\n<p>In this case install nvm for nodes 16.0.0 to 17.0.0.\nfor example <code class=\"language-text\">nvm install 16.19.0</code> then check it by <code class=\"language-text\">node -- version</code> and <code class=\"language-text\">npm -- version</code></p>\n<ul>\n<li>Sometimes you may get an error in package-lock.json. This error is due to the package downloading the docker build. Remove the package-lock.json file and reinstall it using <code class=\"language-text\">npm install</code>.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">   <span class=\"token function\">rm</span> package-lock.json\n   <span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<p>If successful then continue to step 3.</p>\n<ul>\n<li>Permission Issue / Permissions not permitted / Operation not permitted / Module build Failed</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">   Failed to compile.\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span>\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span> Error: EPERM: operation not permitted, <span class=\"token function\">open</span> <span class=\"token string\">'/app/src/index.tsx'</span>\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span> ERROR <span class=\"token keyword\">in</span> ./src/index.tsx\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span> Module build failed <span class=\"token punctuation\">(</span>from ./node_modules/source-map-loader/dist/cjs.js<span class=\"token punctuation\">)</span>:\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span> Error: EPERM: operation not permitted, <span class=\"token function\">open</span> <span class=\"token string\">'/app/src/index.tsx'</span>\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span>\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span> ERROR <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span>eslint<span class=\"token punctuation\">]</span> EPERM: operation not permitted, <span class=\"token function\">open</span> <span class=\"token string\">'/app/src/index.tsx'</span>\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span>\n\tcrossfeed-frontend-1  <span class=\"token operator\">|</span> webpack compiled with <span class=\"token number\">2</span> errors\n    crossfeed-frontend-1  <span class=\"token operator\">|</span> No issues found.</code></pre></div>\n<p>If you receive the above error check the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">   system settings <span class=\"token operator\">></span> Privacy <span class=\"token operator\">&amp;</span> Security <span class=\"token operator\">></span> Files and Folder <span class=\"token operator\">></span> <span class=\"token string\">\"Find Docker\"</span> <span class=\"token operator\">></span> click on Docker <span class=\"token operator\">></span> Under Documents Folder ensure its on by swipping right and showing blue icon.</code></pre></div>\n<p>If the above is correct try looking into the <a href=\"https://github.com/cisagov/development-guide/blob/develop/dev_envs/mac-env-setup.md\">development environment for mac-based computers</a>. Then Review the <strong>account permissions</strong> as necessary.</p>","frontmatter":{"title":"Quickstart","sidenav":"dev"},"fields":{"slug":"/dev/quickstart/"},"headings":[{"value":"Initial Setup","depth":3},{"value":"Running tests","depth":3},{"value":"Monitoring Docker containers","depth":3},{"value":"Further information","depth":3},{"value":"Documentation","depth":3},{"value":"Common Issues","depth":3}]}},"pageContext":{"name":"/dev/quickstart/"}},"staticQueryHashes":["1824138477","3841949133","63159454"],"slicesMap":{}}